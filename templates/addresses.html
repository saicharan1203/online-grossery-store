{% extends "base.html" %}

{% block content %}
<div class="container">
    <div class="addresses-header">
        <h2>My Addresses</h2>
        <a href="{{ url_for('main.add_address') }}" class="btn btn-primary">+ Add New Address</a>
    </div>

    {% if addresses %}
    <div class="addresses-grid">
        {% for address in addresses %}
        <div class="address-card {% if address.is_default %}default-address{% endif %}">
            {% if address.is_default %}
            <span class="default-badge">Default</span>
            {% endif %}

            <div class="address-content">
                <h3>{{ address.full_name }}</h3>
                <p class="address-text">
                    {{ address.address_line1 }}<br>
                    {% if address.address_line2 %}{{ address.address_line2 }}<br>{% endif %}
                    {{ address.city }}, {{ address.state }} {{ address.pincode }}<br>
                    Phone: {{ address.phone }}
                </p>
            </div>

            <div class="address-actions">
                <a href="{{ url_for('main.edit_address', address_id=address.id) }}" class="btn btn-secondary">Edit</a>

                {% if not address.is_default %}
                <form method="POST" action="{{ url_for('main.set_default_address', address_id=address.id) }}"
                    style="display: inline;">
                    <button type="submit" class="btn btn-secondary">Set as Default</button>
                </form>
                {% endif %}

                <form method="POST" action="{{ url_for('main.delete_address', address_id=address.id) }}"
                    style="display: inline;"
                    onsubmit="return confirm('Are you sure you want to delete this address?');">
                    <button type="submit" class="btn btn-danger">Delete</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <p>You haven't added any addresses yet.</p>
        <a href="{{ url_for('main.add_address') }}" class="btn btn-primary">Add Your First Address</a>
    </div>
    {% endif %}
</div>
{% endblock %}