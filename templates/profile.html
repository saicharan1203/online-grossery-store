{% extends "base.html" %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <div class="profile-avatar">
            <div class="avatar-circle">{{ current_user.username[0].upper() }}</div>
        </div>
        <div class="profile-info">
            <h1>{{ current_user.username }}</h1>
            <p class="profile-email">{{ current_user.email }}</p>
            <a href="{{ url_for('main.edit_profile') }}" class="btn btn-secondary">Edit Profile</a>
        </div>
    </div>

    <!-- Statistics Cards -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">üì¶</div>
            <div class="stat-content">
                <h3 class="stat-value">{{ total_orders }}</h3>
                <p class="stat-label">Total Orders</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon">üí∞</div>
            <div class="stat-content">
                <h3 class="stat-value">${{ "%.2f"|format(total_spent) }}</h3>
                <p class="stat-label">Total Spent</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon">‚ù§Ô∏è</div>
            <div class="stat-content">
                <h3 class="stat-value">{{ wishlist_count }}</h3>
                <p class="stat-label">Wishlist Items</p>
            </div>
        </div>
    </div>

    <!-- Recent Orders -->
    <div class="recent-orders-section">
        <div class="section-header">
            <h2>Recent Orders</h2>
            <a href="{{ url_for('main.orders') }}" class="view-all-link">View All ‚Üí</a>
        </div>

        {% if recent_orders %}
        <div class="recent-orders-list">
            {% for order in recent_orders %}
            <div class="recent-order-card">
                <div class="recent-order-info">
                    <h4>Order #{{ order.id }}</h4>
                    <p class="recent-order-date">{{ order.date.strftime('%b %d, %Y') }}</p>
                </div>
                <div class="recent-order-status">
                    <span class="status-badge status-{{ order.status.lower() }}">{{ order.status }}</span>
                </div>
                <div class="recent-order-total">
                    <p>${{ "%.2f"|format(order.total_price) }}</p>
                </div>
                <div class="recent-order-action">
                    <a href="{{ url_for('main.order_detail', order_id=order.id) }}" class="btn-link">View ‚Üí</a>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p class="no-orders-message">No orders yet. <a href="{{ url_for('main.index') }}">Start shopping!</a></p>
        {% endif %}
    </div>

    <!-- Quick Links -->
    <div class="quick-links-section">
        <h2>Quick Links</h2>
        <div class="quick-links-grid">
            <a href="{{ url_for('main.wishlist') }}" class="quick-link-card">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
                    <path
                        d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                        stroke="#ff6b9d" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                <h3>Wishlist</h3>
                <p>{{ wishlist_count }} items</p>
            </a>

            <a href="{{ url_for('main.addresses') }}" class="quick-link-card">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" stroke="#0d5c3e" stroke-width="2" />
                    <circle cx="12" cy="10" r="3" stroke="#0d5c3e" stroke-width="2" />
                </svg>
                <h3>Addresses</h3>
                <p>Manage delivery addresses</p>
            </a>

            <a href="{{ url_for('main.cart') }}" class="quick-link-card">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
                    <circle cx="9" cy="21" r="1" stroke="#0d5c3e" stroke-width="2" />
                    <circle cx="20" cy="21" r="1" stroke="#0d5c3e" stroke-width="2" />
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" stroke="#0d5c3e"
                        stroke-width="2" />
                </svg>
                <h3>Shopping Cart</h3>
                <p>{{ cart_count }} items</p>
            </a>
        </div>
    </div>
</div>
{% endblock %}